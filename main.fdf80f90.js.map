{"version":3,"sources":["scripts/main.js"],"names":["sortOrder","sortHeader","body","document","querySelector","table","tBody","message","createElement","header","text","rowsArray","Array","from","rows","sortlist","colNum","type","order","compare","rowA","rowB","cells","textContent","localeCompare","toNumber","sort","append","string","str","replace","slice","addEventListener","ev","elem","target","tagName","cellIndex","dataset","handleListRows","item","parentElement","classList","toggle","preventSelection","preventDefault","insertAdjacentHTML","form","button","inputName","inputPosition","inputOffice","inputAge","inputSalary","onlyWithLabels","filter","element","showNotification","posTop","posRight","title","shownText","className","add","style","top","right","setTimeout","remove","formatValue","input","firstLetter","toUpperCase","val","i","length","formatToString","onclick","correctInputTextLength","every","el","value","correctInputAgeLength","qa","correctInputSalaryLength","prevTargetContent","focus","evt","key","blur"],"mappings":"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","file":"main.fdf80f90.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst body = document.querySelector('body');\n\nconst table = document.querySelector('table');\nconst tBody = table.querySelector('tbody');\n\nconst message = document.createElement('div');\nconst header = document.createElement('h2');\nconst text = document.createElement('p');\n\nlet rowsArray = Array.from(tBody.rows);\n\nlet sortOrder;\nlet sortHeader;\n\ntable.addEventListener('click', function(ev) {\n  const elem = ev.target;\n\n  if (elem.tagName !== 'TH') {\n    return;\n  }\n\n  if (sortHeader !== elem) {\n    sortOrder = 'ASC';\n    sortHeader = elem;\n  } else {\n    sortOrder = 'DESC';\n    sortHeader = !sortHeader;\n  }\n\n  sortlist(elem.cellIndex, elem.dataset.type, sortOrder);\n});\n\nfunction sortlist(colNum, type, order) {\n  let compare;\n\n  if (order === 'ASC') {\n    compare = function(rowA, rowB) {\n      switch (type) {\n        case 'string':\n          return rowA.cells[colNum].textContent\n            .localeCompare(rowB.cells[colNum].textContent);\n\n        case 'number':\n          return rowA.cells[colNum].textContent\n          - rowB.cells[colNum].textContent;\n        case 'salary':\n          return toNumber(rowA.cells[colNum].textContent)\n          - toNumber(rowB.cells[colNum].textContent);\n      }\n    };\n  } else {\n    compare = function(rowB, rowA) {\n      switch (type) {\n        case 'string':\n          return rowA.cells[colNum].textContent\n            .localeCompare(rowB.cells[colNum].textContent);\n        case 'number':\n          return rowA.cells[colNum].textContent\n          - rowB.cells[colNum].textContent;\n        case 'salary':\n          return toNumber(rowA.cells[colNum].textContent)\n          - toNumber(rowB.cells[colNum].textContent);\n      }\n    };\n  }\n\n  rowsArray.sort(compare);\n  tBody.append(...rowsArray);\n}\n\nfunction toNumber(string) {\n  const str = string.replace(',', '.').slice(1);\n\n  return str;\n}\n\nconst handleListRows = function(ev) {\n  const item = ev.target;\n\n  if (item.tagName !== 'TD') {\n    return;\n  }\n  item.parentElement.classList.toggle('active');\n};\n\nconst preventSelection = function(ev) {\n  ev.preventDefault();\n};\n\ntable.addEventListener('click', handleListRows);\ntable.addEventListener('mousedown', preventSelection);\n\n// adding form\n\nbody.insertAdjacentHTML('beforeend', `\n  <form\n    class='new-employee-form'\n    method = \"GET\"\n    action=\"/\"\n  >\n    <label>\n      Name:\n      <input\n        type=\"text\"\n        name=\"name\"\n        data-qa=\"name\"\n        minlength=\"4\"\n        required\n      />\n    </label>\n    <label>\n      Position:\n      <input\n        type=\"text\"\n        name=\"position\"\n        data-qa=\"position\"\n        minlength=\"4\"\n        required\n      />\n    </label>\n    <label>\n      Office:\n      <select\n        name=\"office\"\n        data-qa=\"office\"\n        required\n      >\n        <option>Tokyo</option>\n        <option>Singapore</option>\n        <option>London</option>\n        <option>New York</option>\n        <option>Edinburgh</option>\n        <option>San Francisco</option>\n      </select>\n    </label>\n    <label>\n      Age:\n      <input\n        type=\"number\"\n        name=\"age\"\n        data-qa=\"age\"\n        min=\"18\"\n        max=\"90\"\n        required\n      />\n    </label>\n    <label>\n      Salary:\n      <input\n        type=\"number\"\n        name=\"salary\"\n        min=\"0\"\n        data-qa=\"salary\"\n        required\n      />\n    </label>\n\n    <button type=\"submit\">Save to lable</button>\n      \n  </form>\n`);\n\nconst form = document.querySelector('.new-employee-form');\n\nconst button = body.querySelector('button');\n\nconst inputName = document.querySelector('[data-qa =\"name\"]');\nconst inputPosition = document.querySelector('[data-qa =\"position\"]');\nconst inputOffice = document.querySelector('[data-qa =\"office\"]');\nconst inputAge = document.querySelector('[data-qa =\"age\"]');\nconst inputSalary = document.querySelector('[data-qa =\"salary\"]');\n\nconst onlyWithLabels = [...form].filter(element =>\n  element.parentElement.tagName === 'LABEL');\n\nbutton.onclick = (ev) => {\n  const correctInputTextLength = [...onlyWithLabels]\n    .filter(elem => elem.type === 'text')\n    .every(el => el.value.length > 3);\n\n  const correctInputAgeLength = [...onlyWithLabels]\n    .filter(elem => elem.dataset.qa === 'age')\n    .every(el => el.value > 17 && el.value < 91);\n\n  const correctInputSalaryLength = [...onlyWithLabels]\n    .filter(elem => elem.dataset.qa === 'salary')\n    .every(el => el.value > 0);\n\n  const allInputsValid = correctInputTextLength\n    && correctInputAgeLength\n    && correctInputSalaryLength;\n\n  if (allInputsValid) {\n    ev.preventDefault();\n\n    tBody.insertAdjacentHTML('beforeend', `\n      <tr>\n        <td>${formatValue(inputName.value)}</td>\n        <td>${formatValue(inputPosition.value)}</td>\n        <td>${inputOffice.value}</td>\n        <td>${inputAge.value}</td>\n        <td>${formatToString(inputSalary.value)}</td>\n      </tr>\n    `);\n\n    rowsArray = Array.from(tBody.rows);\n  }\n\n  if (!correctInputTextLength) {\n    showNotification(10, 10, 'Attention',\n      \"'The length must be more than 4 digits'\", 'error');\n  } else if (!correctInputAgeLength) {\n    showNotification(10, 10, 'Attention',\n      \"'The age must be betwen 18 and 90'\", 'error');\n  } else if (!correctInputSalaryLength) {\n    showNotification(10, 10, 'Attention',\n      \"'Salary must be passed'\", 'error');\n  } else {\n    showNotification(10, 10, 'Congratulation',\n      'New employee is added to the form', 'success');\n  }\n};\n\nfunction showNotification(posTop, posRight, title, shownText, type) {\n  message.className = 'notification';\n  header.className = `title`;\n  header.textContent = `${title}`;\n  text.textContent = `${shownText}`;\n  message.classList.add(`${type}`);\n  message.append(header, text);\n  document.body.append(message);\n\n  message.style.top = posTop + 'px';\n  message.style.right = posRight + 'px';\n\n  setTimeout(() => {\n    message.remove();\n  }, 4000);\n}\n\nfunction formatValue(input) {\n  const firstLetter = input.slice(0, 1).toUpperCase();\n  let val = '';\n\n  for (let i = 1; i < input.length; i++) {\n    if (input[i] === ' ') {\n      val += ' ' + input[i + 1].toUpperCase();\n      i += 2;\n    }\n\n    val += input[i];\n  }\n\n  return firstLetter + val;\n}\n\nfunction formatToString(input) {\n  switch (input.length) {\n    case 3:\n      return '$' + '0,' + input;\n    case 2:\n      return '$' + '0,0' + input;\n    case 1:\n      return '$' + '0,00' + input;\n    default:\n      return '$' + input.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n  }\n}\n\n// editing of table cells\n\ntBody.addEventListener('dblclick', function(ev) {\n  const target = ev.target;\n\n  if (target.tagName !== 'TD') {\n    return;\n  }\n\n  const prevTargetContent = target.textContent;\n\n  const input = document.createElement('input');\n\n  input.className = 'cell-input';\n  input.value = prevTargetContent;\n  target.textContent = '';\n  target.append(input);\n  input.focus();\n\n  input.addEventListener('blur', function() {\n    if (input.value.length === 0) {\n      input.value = prevTargetContent;\n\n      showNotification(10, 10, 'Attention',\n        \"The field shouldn't be empty \\n *Initial value was restored!\",\n        'error');\n    }\n    target.textContent = input.value;\n    input.remove();\n  });\n\n  input.addEventListener('keypress', function(evt) {\n    if (input.value.length === 0) {\n      input.value = prevTargetContent;\n\n      showNotification(10, 10, 'Attention',\n        \"The field shouldn't be empty \\n *Initial value was restored!\",\n        'error');\n    }\n\n    if (evt.key === 'Enter') {\n      target.textContent = input.value;\n      input.remove();\n      input.blur();\n    }\n  });\n});\n"]}